-- Rueda de Mensajes RÃ¡pidos para MÃ³vil
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer

-- Mensajes rÃ¡pidos
local MENSAJES_RAPIDOS = {
    "ez",
    "chill", 
    "my bad",
    "desintala plz",
    "gg",
    "remato",
    "coloco",
    "pancho"
}

-- Colores para los botones
local COLORES = {
    Color3.fromRGB(255, 100, 100),
    Color3.fromRGB(255, 180, 100),
    Color3.fromRGB(255, 255, 100),
    Color3.fromRGB(180, 255, 100),
    Color3.fromRGB(100, 255, 180),
    Color3.fromRGB(100, 200, 255),
    Color3.fromRGB(180, 100, 255),
    Color3.fromRGB(255, 100, 200)
}

-- Variables
local screenGui, mainFrame, centerButton, botones = {}, nil
local ruedaAbierta = false
local arrastrando = false
local posicionInicial, posicionArrastre

-- Crear la interfaz
local function crearInterfaz()
    -- ScreenGui principal
    screenGui = Instance.new("ScreenGui")
    screenGui.Name = "RuedaMensajes"
    screenGui.ResetOnSpawn = false
    
    -- Marco principal (movible)
    mainFrame = Instance.new("Frame")
    mainFrame.Name = "MarcoPrincipal"
    mainFrame.Size = UDim2.new(0, 200, 0, 200)
    mainFrame.Position = UDim2.new(0.1, 0, 0.7, 0)
    mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
    mainFrame.BackgroundTransparency = 0.1
    mainFrame.BorderSizePixel = 0
    mainFrame.Active = true
    
    local esquinas = Instance.new("UICorner")
    esquinas.CornerRadius = UDim.new(0.1, 0)
    esquinas.Parent = mainFrame
    
    local borde = Instance.new("UIStroke")
    borde.Color = Color3.fromRGB(100, 100, 255)
    borde.Thickness = 2
    borde.Parent = mainFrame
    
    -- BotÃ³n central para abrir/cerrar
    centerButton = Instance.new("TextButton")
    centerButton.Name = "BotonCentral"
    centerButton.Size = UDim2.new(0, 70, 0, 70)
    centerButton.Position = UDim2.new(0.5, -35, 0.5, -35)
    centerButton.AnchorPoint = Vector2.new(0.5, 0.5)
    centerButton.BackgroundColor3 = Color3.fromRGB(80, 120, 255)
    centerButton.BorderSizePixel = 0
    centerButton.Text = "ðŸ’¬\nMENSAJES"
    centerButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    centerButton.TextScaled = true
    centerButton.Font = Enum.Font.GothamBold
    centerButton.ZIndex = 10
    
    local centerEsquinas = Instance.new("UICorner")
    centerEsquinas.CornerRadius = UDim.new(1, 0)
    centerEsquinas.Parent = centerButton
    
    local centerBorde = Instance.new("UIStroke")
    centerBorde.Color = Color3.fromRGB(255, 255, 255)
    centerBorde.Thickness = 2
    centerBorde.Parent = centerButton
    
    centerButton.Parent = mainFrame
    
    -- Crear botones de mensajes en forma de rueda
    botones = {}
    local cantidadMensajes = #MENSAJES_RAPIDOS
    local radio = 80
    local anguloPorBoton = (2 * math.pi) / cantidadMensajes
    
    for i = 1, cantidadMensajes do
        local angulo = (i - 1) * anguloPorBoton
        local x = math.cos(angulo) * radio
        local y = math.sin(angulo) * radio
        
        local boton = Instance.new("TextButton")
        boton.Name = "Boton_" .. i
        boton.Size = UDim2.new(0, 60, 0, 60)
        boton.Position = UDim2.new(0.5, x - 30, 0.5, y - 30)
        boton.AnchorPoint = Vector2.new(0.5, 0.5)
        boton.BackgroundColor3 = COLORES[i]
        boton.BackgroundTransparency = 0.2
        boton.BorderSizePixel = 0
        boton.Text = MENSAJES_RAPIDOS[i]
        boton.TextColor3 = Color3.fromRGB(255, 255, 255)
        boton.TextScaled = true
        boton.Font = Enum.Font.GothamBold
        boton.ZIndex = 5
        boton.Visible = false
        
        local botonEsquinas = Instance.new("UICorner")
        botonEsquinas.CornerRadius = UDim.new(0.15, 0)
        botonEsquinas.Parent = boton
        
        local botonBorde = Instance.new("UIStroke")
        botonBorde.Color = Color3.fromRGB(255, 255, 255)
        botonBorde.Thickness = 1.5
        botonBorde.Parent = boton
        
        boton.Parent = mainFrame
        botones[i] = boton
    end
    
    -- Etiqueta de estado
    local etiquetaEstado = Instance.new("TextLabel")
    etiquetaEstado.Name = "Estado"
    etiquetaEstado.Size = UDim2.new(1, -10, 0, 25)
    etiquetaEstado.Position = UDim2.new(0, 5, 1, 5)
    etiquetaEstado.BackgroundTransparency = 1
    etiquetaEstado.Text = "Toca para abrir"
    etiquetaEstado.TextColor3 = Color3.fromRGB(200, 200, 200)
    etiquetaEstado.TextScaled = true
    etiquetaEstado.Font = Enum.Font.Gotham
    etiquetaEstado.Visible = true
    
    etiquetaEstado.Parent = mainFrame
    
    mainFrame.Parent = screenGui
    return screenGui, etiquetaEstado
end

-- FunciÃ³n para abrir la rueda con animaciÃ³n
local function abrirRueda()
    if ruedaAbierta then return end
    
    ruedaAbierta = true
    centerButton.Visible = false
    
    -- AnimaciÃ³n de apariciÃ³n de botones
    for i, boton in ipairs(botones) do
        boton.Visible = true
        boton.Size = UDim2.new(0, 10, 0, 10)
        boton.BackgroundTransparency = 0.8
        
        local infoTween = TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.Out)
        local tween = TweenService:Create(boton, infoTween, {
            Size = UDim2.new(0, 60, 0, 60),
            BackgroundTransparency = 0.2
        })
        tween:Play()
    end
    
    if estadoLabel then
        estadoLabel.Text = "ðŸ‘† Elige un mensaje"
    end
end

-- FunciÃ³n para cerrar la rueda con animaciÃ³n
local function cerrarRueda()
    if not ruedaAbierta then return end
    
    ruedaAbierta = false
    
    -- AnimaciÃ³n de desapariciÃ³n
    for i, boton in ipairs(botones) do
        local infoTween = TweenInfo.new(0.2, Enum.EasingStyle.Back, Enum.EasingDirection.In)
        local tween = TweenService:Create(boton, infoTween, {
            Size = UDim2.new(0, 10, 0, 10),
            BackgroundTransparency = 0.8
        })
        tween:Play()
    end
    
    -- Ocultar botones despuÃ©s de la animaciÃ³n
    delay(0.25, function()
        for _, boton in ipairs(botones) do
            boton.Visible = false
        end
        centerButton.Visible = true
    end)
    
    if estadoLabel then
        estadoLabel.Text = "Toca para abrir"
    end
end

-- FunciÃ³n para enviar mensaje
local function enviarMensaje(mensaje)
    print("ðŸš€ Mensaje rÃ¡pido: " .. mensaje)
    
    -- Intentar enviar al chat del juego
    local funciono, resultado = pcall(function()
        local eventosChat = game:GetService("ReplicatedStorage"):FindFirstChild("DefaultChatSystemChatEvents")
        if eventosChat then
            local decirMensaje = eventosChat:FindFirstChild("SayMessageRequest")
            if decirMensaje then
                decirMensaje:FireServer(mensaje, "All")
                return true
            end
        end
        return false
    end)
    
    if not funciono then
        print("ðŸ’¬ Mensaje: " .. mensaje)
    end
end

-- Configurar interacciones
local function configurarInteracciones()
    -- BotÃ³n central
    centerButton.MouseButton1Click:Connect(function()
        if ruedaAbierta then
            cerrarRueda()
        else
            abrirRueda()
        end
    end)
    
    -- Configurar cada botÃ³n de mensaje
    for i, boton in ipairs(botones) do
        boton.MouseButton1Click:Connect(function()
            if not ruedaAbierta then return end
            
            local mensaje = MENSAJES_RAPIDOS[i]
            
            -- Efecto visual al presionar
            boton.BackgroundTransparency = 0
            boton.Text = "âœ“"
            
            -- Enviar mensaje
            enviarMensaje(mensaje)
            
            -- Restaurar botÃ³n despuÃ©s de un momento
            delay(0.5, function()
                if boton then
                    boton.BackgroundTransparency = 0.2
                    boton.Text = mensaje
                end
            end)
            
            -- Cerrar rueda despuÃ©s de enviar
            delay(0.8, function()
                cerrarRueda()
            end)
        end)
        
        -- Efecto hover para PC
        boton.MouseEnter:Connect(function()
            if ruedaAbierta then
                boton.BackgroundTransparency = 0.1
            end
        end)
        
        boton.MouseLeave:Connect(function()
            if ruedaAbierta then
                boton.BackgroundTransparency = 0.2
            end
        end)
    end
    
    -- Hacer la ventana arrastrable
    mainFrame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch then
            arrastrando = true
            posicionArrastre = input.Position
            posicionInicial = mainFrame.Position
        end
    end)
    
    mainFrame.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch then
            arrastrando = false
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if arrastrando and input.UserInputType == Enum.UserInputType.Touch then
            local diferencia = input.Position - posicionArrastre
            mainFrame.Position = UDim2.new(
                posicionInicial.X.Scale, 
                posicionInicial.X.Offset + diferencia.X,
                posicionInicial.Y.Scale, 
                posicionInicial.Y.Offset + diferencia.Y
            )
        end
    end)
end

-- FunciÃ³n principal
local function inicializar()
    -- Crear interfaz
    screenGui, estadoLabel = crearInterfaz()
    
    -- Parentear correctamente
    if gethui then
        screenGui.Parent = gethui()
    elseif syn and syn.protect_gui then
        syn.protect_gui(screenGui)
        screenGui.Parent = game:GetService("CoreGui")
    else
        screenGui.Parent = game:GetService("CoreGui")
    end
    
    -- Configurar interacciones
    configurarInteracciones()
    
    print("ðŸŽ¯ Rueda de Mensajes RÃ¡pidos CARGADA")
    print("ðŸ’¬ BotÃ³n central para abrir/cerrar")
    print("ðŸ‘† 8 mensajes disponibles")
    print("ðŸ§­ Arrastra para mover")
    print("ðŸ“± Optimizado para mÃ³vil")
end

-- Iniciar
inicializar()
